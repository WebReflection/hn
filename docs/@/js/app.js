const e={initializeApp({databaseURL:e}){this.databaseURL=e},database(){const{databaseURL:e}=this,t=e=>e.json(),s={credentials:"same-origin"};return{ref:a=>({child:n=>({once(r,o){fetch(`${e}/${a}/${n}.json`,s).then(t).then(e=>o({val:()=>e}))}})})}}},t=self.requestIdleCallback||setTimeout;var s,a;Promise.all([(s="../@/3rd/uhtml.js",a="uhtml",new Promise(e=>{const t=document.createElement("script");t.onload=()=>e(self[a]),t.async=!0,t.src=s,document.head.appendChild(t)})),import("./hn.js"),import("./view.js")]).then(([s,{default:a},{default:n}])=>{const{stories:r,story:o,item:i,user:c,parse:l}=a(e),{render:d,html:h}=s,{body:m}=document,{header:u,main:p,footer:f,about:b,details:g,profile:v,notFound:k}=n(s),$=()=>{m.classList.remove("loading")},L=(e,t)=>{d(m,h`${e}${t}${f()}`)},j=e=>{y=e,m.classList.add("loading");const{id:s,page:a,type:n,pathname:d,user:h}=l(e),f=u({page:a,header:{current:d,stories:r}});let j=!0;switch(n){case"item":const n=y;i(s).then(e=>{if(e){t($);const s=e=>{const n=i(e);return n.then(e=>{e&&(n.model=e,e.comments=(e.kids||[]).map(s),j&&(j=!j,t(a)))}),n},a=()=>{n===y&&(L(f,g(e)),j=!0)};e.comments=(e.kids||[]).map(s),a()}else L(f,k())});break;case"story":const l=y;o(d).then(e=>{t($);const s=Math.ceil(e.length/20),n=20*(a-1),r=20*a,o=e.slice(n,r).map((e,s)=>{const a=i(e);return a.then(e=>{e&&(a.index=n+s+1,a.model=e,j&&(j=!j,t(c)))}),a}),c=()=>{l===y&&(L(f,p(o,a,s)),j=!0)};c()});break;case"user":const m=y;c(h).then(e=>{m===y&&(e?(t($),L(f,v(e))):(t($),L(f,k())))});break;default:if(/\/about\/$/.test(e)){const e=y,s=u({page:a,header:{current:"about",stories:r}});b().then(a=>{e===y&&(t($),L(s,a))})}else t($),L(f,k())}};let y="";self.SSR||j(location.href),m.addEventListener("click",e=>{const{target:t}=e,s=t.closest("a");if(s){let t=s.getAttribute("href");/^(?:\.|\/)/.test(t)&&(/^\.\/\?\d+$/.test(t)&&(t=y.replace(/\/\?\d+$/,t.slice(1))),e.preventDefault(),history.pushState(null,document.title,t),j(t))}}),self.addEventListener("popstate",()=>{j(location.href)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("../sw.js",{scope:"../"})});