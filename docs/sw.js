const EXPIRATION=604800,EXPIRATION_KEY="date",offline=()=>new Response("null",teapot),teapot={headers:{"Content-Type":"application/json"},status:418},openCache=caches.open("iHN-teapot");addEventListener("fetch",e=>{const{request:t}=e;e.respondWith(openCache.then(e=>Promise.all([e.match(t),fetch(t).catch(offline)]).then(([s,a])=>{const{status:n}=a;return 199<n&&n<400?(e.put(t,a.clone()),a):s||a})))}),addEventListener("install",e=>{e.waitUntil(openCache.then(e=>e.addAll(["./@/3rd/uhtml.js","./@/css/app.css","./@/js/about.js","./@/js/app.js","./@/js/hn.js","./@/js/view.js","./about/","./top/?1"])))}),addEventListener("message",({data:e})=>{const{action:t}=e;switch(t){case"purge":const e=Date.now();openCache.then(t=>{t.keys().then(s=>{s.forEach(s=>{t.match(s).then(({headers:a})=>{if(a.has("date")){Date.parse(a.get("date"))<e&&t.delete(s)}})})})})}});